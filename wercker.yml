box: tisplang/tisp-build

build:
  steps:
    - script:
      name: env
      code: |
        export GOPATH=~
        export PATH=$GOPATH/bin:$PATH

    - setup-go-workspace

    - script:
      name: install dependencies
      code: rake install_deps

    - script:
      name: lint
      code: rake lint

    - script:
      name: unit test
      code: rake unit_test

    - script:
      name: command test
      code: rake command_test

    - script:
      name: coverage report
      code: bash <(curl -s https://codecov.io/bash) -t $CODECOV_TOKEN

    - script:
      name: build
      code: rake build

    - script:
      name: install
      code: rake install
